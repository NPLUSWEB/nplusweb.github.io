{"version":3,"sources":["main.js"],"names":["url","window","location","href","projectName","substr","indexOf","console","log","app","numBe","data","openid","created","init","methods","getOpenid","_this","this","code","$","util","getParameter","ajax","async","type","serverHost","cache","success","result","status","error","dataType","total","type_1","type_2","parseInt","alert","JSON","stringify","e","msg","clickBefore","html","fadeIn","clickAfter","video","tvp","VideoInfo","setVid","player","Player","setCurVideo","addParam","attr","setTimeout","v","document","getElementById","addEventListener","removeClass","addClass","show","click","d","Date","getTime","dw","parseFloat","documentElement","style","fontSize","winH","height","ff","s","css","transform","-webkit-transform","play","hide","parents","fadeOut","title","link","shareparams","desc","WxShare","initConfig"],"mappings":"aACA,IAAIA,IAAMC,OAAOC,SAASC,KAD1BC,YAAAJ,IAAAK,OAAA,EAAAL,IAAAM,QAAA,cACAC,QAAIP,IAAMC,aACV,IAAIG,IAAAA,IAAAA,KACJG,GAAQC,OACJC,MACIC,MADU,MAEdC,MAAM,MACFD,OAAO,MAEPE,QAPUZ,WASda,KAPcC,QASVC,SATUC,UAAA,SAAAA,YAaN,IAAIC,MAAQC,KAFXC,KAAAC,EAAAC,KAAAC,aAAA,QAEDF,EAAAG,MACIJ,KAAAA,OAIAK,OAAO,EAFTD,OAAK,EACHE,IAAAA,QADGC,WAAA,kCAEHF,MACAG,KAHGR,MAKHR,QAAM,SAAAiB,QAAAC,QACF,IAAAlB,KAAQQ,KAAAA,IAAAA,OAAAA,KAEZS,GAAS,GAATA,KAASE,QAAkB,QAARD,KAAQC,OAInBb,OADAN,QAAKmB,WACClB,KAHND,MAAAA,OAAYA,KAAMkB,MAMlBE,MAAA,WACH,OAAA,SAIJjB,KAAA,WApBLI,KALCF,YA4BLF,EAAMS,MACEN,KAAAA,OACJA,IAAMD,YAAN,sCACEO,SAAK,OACHE,QAAM,SADHI,GAEH7B,GAAmB,SAAdI,EAAAA,SAAc,IAAAyB,EAAAC,OAFhB,CAGHE,IAAUC,EAHPJ,EAAAlB,KAAAuB,OAAAL,EAAAlB,KAAAwB,OAIHP,IAASlB,MAAA0B,SAAUP,EAAQlB,KAAAuB,OAAAD,EAAA,KAAA,IACnBJ,IAAAA,MAAA,IAAkBO,SAAUP,EAAOC,KAAAA,OAAWG,EAAM,KAAA,SAEpDxB,MAAIC,EAAQ0B,MAGZC,MAAAA,SAAMR,EAAAA,GAVX,OAWEtB,QAAAwB,MAAAO,KAAAC,UAAAC,GAAA,MAAAC,IAXF,MAgBFC,YAAA,WA/CJtB,EAAAG,MAkDLmB,KAAa,OACLzB,IAAAA,YAAJ,iCACEM,SAAK,OACHE,MACAzB,OAvBJkB,KAuBSd,OACL4B,KAAU,GAENpB,QAAAA,SAAcA,GAUb,GATK,sBAANa,EAAMgB,IANPrB,EAAA,aAAAuB,KAAA,8BAQgBd,YAAVA,EAAAY,IACDZ,EAAAA,aAAcc,KAAA,8BAAlBvB,EAAA,aAEkBqB,KAAPZ,EAAcY,KAExBrB,EAFM,SAEAwB,SAEN,SAAAf,EAAAC,SAAA,IAAAD,EAAAC,OAAA,CACC,IAAAG,EAASW,EAAXjC,KAAAuB,OAAAL,EAAAlB,KAAAwB,OACA1B,IAAAC,MAAA0B,SAAAP,EAAAlB,KAAAuB,OAAAD,EAAA,KAAA,IACIJ,IAAAA,MAAA,IAAkBO,SAAUP,EAAOC,KAAAA,OAAWG,EAAM,KAAA,MAGpDxB,MAAAA,SAAA+B,EAAaC,GArBlB,OAsBElC,QAAAwB,MAAAO,KAAAC,UAAAC,GAAA,MAAAC,IAtBF,MA2BFI,WAAA,WA/EJzB,EAAAG,MAkFLsB,KAAY,OACJ5B,IAAAA,YAAJ,iCACEM,SAAK,OACHE,MACAzB,OAlCJkB,KAkCSd,OACL4B,KAAU,GAENpB,QAAAA,SAAcA,GAUb,GATK,sBAANa,EAAMgB,IANPrB,EAAA,aAAAuB,KAAA,8BAQgBd,YAAVA,EAAAY,IACDZ,EAAAA,aAAcc,KAAA,8BAAlBvB,EAAA,aAEkBqB,KAAPZ,EAAcY,KAExBrB,EAFM,SAEAwB,SAEN,SAAAf,EAAAC,SAAA,IAAAD,EAAAC,OAAA,CACC,IAAAG,EAASW,EAAXjC,KAAAuB,OAAAL,EAAAlB,KAAAwB,OACA1B,IAAAC,MAAA0B,SAAAP,EAAAlB,KAAAuB,OAAAD,EAAA,KAAA,IACIJ,IAAAA,MAAA,IAAkBO,SAAUP,EAAOC,KAAAA,OAAWG,EAAM,KAAA,MAGpDxB,MAAAA,SAAA+B,EAAaC,GArBlB,OAsBElC,QAAAwB,MAAAO,KAAAC,UAAAC,GAAA,MAAAC,IAtBF,SA6BVrB,EAAA,WAjHI,IAAA0B,EAAA,IAAAC,IAAAC,UAXbF,EAAAG,OAAA,eA+HE,IAAAC,EAAY,IAAAH,IAAAI,OAAA,OAAA,QACVD,EAAIJ,YAAYC,GAChBD,EAAMG,SAAO,SAAb,KACAC,EAAIA,SAAS,SAAQC,SACrBD,EAAOE,SAAAA,MAAYN,gBACnBI,EAAOG,MAAAA,YACPH,WAAOG,WACPH,EAAAA,SAAAI,KAAgB,uBAAhB,MACAJ,EAAAA,SAAaI,KAAA,6BAAb,QACAC,EAAAA,SAAWD,KAAA,KAAY,SACnBlC,IAAEoC,EAAAC,SAAcC,eAAA,SAChBtC,EAAEuC,iBAAc,wBAAhB,WACEvC,EAAA,QAASkC,YAAW,cAClBE,EAAAA,UAAIC,SAEJrC,EAAAA,iBAAUwC,yBAAV,WACAxC,EAAE,QAAFyC,SAAA,cAFJzC,EAAA,UAAA0C,UAKI1C,KAEHA,EAAA,UAHD2C,MAAA,WAID3C,EAbH,QAAAwC,YAAA,cAiBI,IAAII,EAAI,IAAIC,KAFdhE,OAAFC,SAAkBC,KAAAC,YAAY,uCAAA4D,EAAAE,YAG1BjE,IAAAA,EAAOC,EAAAA,QAASC,SAKhBgE,EAAK,IARTC,WAAAX,SAAAY,gBAAAC,MAAAC,UAMA,GAAIC,EAAOpD,KAAA+C,EAAUM,CACjBC,IAAAA,EAAKN,GAAWX,KAAAA,GAChBU,EAAAA,SAAWO,KACXF,UAAJ,SAAwBG,EAAA,IAChBA,oBAAI,SAARA,EAAA,WAGIvD,EAAA,SAAAwD,KAFJC,UAAA,WAIGC,oBAAA,aAGC1D,EAAA,QAAAqD,OAAAD,GAFWpD,EAAA,SAAf2C,MAAA,WAIHjB,EAAAiC,OACC3D,EAAA,gBAAF4D,OACE5D,EAAA,UAAFkC,KAAiB,YAAY,KAEzBlC,EAAAA,cAAE2C,MAAgBiB,WAClB5D,EAAEF,MAAA+D,QAAF,SAAiBC,cAGjB9D,IAAAA,aACH+D,MAFD,gBAnDJC,KAAAhF,YAAA,sCAuDIiF,OAAAA,2EACAC,KAAA,qBAEAC,QAAAC,WAAUH","file":"main-18b8381533.js","sourcesContent":["// JavaScript Document\r\nvar url = window.location.href;\r\nvar projectName = url.substr(0, url.indexOf('/resource'));\r\nconsole.log(projectName);\r\nvar app = new Vue({\r\n    el: '#app',\r\n    data: {\r\n        numBe: '50%',\r\n        numAf: '50%',\r\n        openid: null\r\n    },\r\n    created() {\r\n        var _this = this;\r\n        this.init();\r\n    },\r\n    methods: {\r\n        getOpenid: function () {\r\n            var _this = this;\r\n            var code = $.util.getParameter(\"code\");\r\n\r\n            $.ajax({\r\n                type: \"POST\",\r\n                async: false, // 设置同步方式\r\n                cache: false,\r\n                url: WxShare.serverHost + \"api/WxOpen/getOpenidByCode.json\",\r\n                data: {\r\n                    \"code\": code\r\n                },\r\n                success: function (result) {\r\n                    var data = eval(\"(\" + result + \")\");\r\n\r\n                    if (data.status == true || data.status == \"true\") {\r\n                        _this.openid = data.data;\r\n                    } else {\r\n                        WxShare.authBase();\r\n                        return null;\r\n                    }\r\n                },\r\n                error: function () {\r\n                    return null;\r\n                }\r\n            });\r\n        },\r\n        init: function () {\r\n            var _this = this;\r\n            _this.getOpenid();\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: projectName + '/upvote/phone/Upvote/getAmount.json',\r\n                dataType: 'json',\r\n                success: function (result) {\r\n                    if (result.status === 'true' || result.status === true) {\r\n                        var total = result.data.type_1 + result.data.type_2;\r\n                        app.numBe = parseInt(result.data.type_1 / total * 100) + '%';\r\n                        app.numAf = (100 - parseInt(result.data.type_1 / total * 100)) + '%';\r\n                    } else {\r\n                        alert(result.msg);\r\n                    }\r\n                },\r\n                error: function (e, msg) {\r\n                    console.error(JSON.stringify(e) + ' - ' + msg);\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        clickBefore: function () {\r\n            var _this = this;\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: projectName + '/upvote/phone/Upvote/like.json',\r\n                dataType: 'json',\r\n                data: {\r\n                    openid: _this.openid,\r\n                    type: 1\r\n                },\r\n                success: function (result) {\r\n                    if (result.msg == 'openid参数缺失，请重新授权登录') {\r\n                        $(\".prop .p1\").html('亲,你的网络不太稳定,<br>请刷新页面,重新尝试!');\r\n                    } else if (result.msg == '支持对象参数缺失') {\r\n                        $(\".prop .p1\").html('亲,你的网络不太稳定,<br>请刷新页面,重新尝试!');\r\n                    } else {\r\n                        $(\".prop .p1\").html(result.msg);\r\n                    }\r\n                    $(\".prop\").fadeIn();\r\n                    /*alert(result.msg);*/\r\n                    if (result.status === 'true' || result.status === true) {\r\n                        var total = result.data.type_1 + result.data.type_2;\r\n                        app.numBe = parseInt(result.data.type_1 / total * 100) + '%';\r\n                        app.numAf = (100 - parseInt(result.data.type_1 / total * 100)) + '%';\r\n                    }\r\n                },\r\n                error: function (e, msg) {\r\n                    console.error(JSON.stringify(e) + ' - ' + msg);\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        clickAfter: function () {\r\n            var _this = this;\r\n            $.ajax({\r\n                type: 'POST',\r\n                url: projectName + '/upvote/phone/Upvote/like.json',\r\n                dataType: 'json',\r\n                data: {\r\n                    openid: _this.openid,\r\n                    type: 2\r\n                },\r\n                success: function (result) {\r\n                    if (result.msg == 'openid参数缺失，请重新授权登录') {\r\n                        $(\".prop .p1\").html('亲,你的网络不太稳定,<br>请刷新页面,重新尝试!');\r\n                    } else if (result.msg == '支持对象参数缺失') {\r\n                        $(\".prop .p1\").html('亲,你的网络不太稳定,<br>请刷新页面,重新尝试!');\r\n                    } else {\r\n                        $(\".prop .p1\").html(result.msg);\r\n                    }\r\n                    $(\".prop\").fadeIn();\r\n                    /*alert(result.msg);*/\r\n                    if (result.status === 'true' || result.status === true) {\r\n                        var total = result.data.type_1 + result.data.type_2;\r\n                        app.numBe = parseInt(result.data.type_1 / total * 100) + '%';\r\n                        app.numAf = (100 - parseInt(result.data.type_1 / total * 100)) + '%';\r\n                    }\r\n                },\r\n                error: function (e, msg) {\r\n                    console.error(JSON.stringify(e) + ' - ' + msg);\r\n                    return false;\r\n                }\r\n            });\r\n        }\r\n    }\r\n});\r\n$(function () {\r\n    var video = new tvp.VideoInfo();\r\n    video.setVid(\"c05224cxxyn\");\r\n    var player = new tvp.Player('100%', '100%');\r\n    player.setCurVideo(video);\r\n    player.addParam(\"adplay\", \"0\");\r\n    player.addParam(\"player\", \"html5\");\r\n    player.addParam(\"pic\", \"img/img1.jpg\");\r\n    player.write(\"videoBox\");\r\n    setTimeout(function () {\r\n        $('video').attr('x5-video-player-type', 'h5');\r\n        $('video').attr('x5-video-player-fullscreen', 'true');\r\n        $('video').attr('id', 'video');\r\n        var v = document.getElementById('video');\r\n        v.addEventListener(\"x5videoexitfullscreen\", function () {\r\n            $('body').removeClass('fullscreen');\r\n            $('.close').hide();\r\n        });\r\n        v.addEventListener(\"x5videoenterfullscreen\", function () {\r\n            $('body').addClass('fullscreen');\r\n            $('.close').show();\r\n        });\r\n    }, 500);\r\n\r\n    $('.close').click(function () {\r\n        $('body').removeClass('fullscreen');\r\n        var d = new Date();\r\n        window.location.href = projectName + '/resource/gulp-demo/dist/index.html?' + d.getTime();\r\n    });\r\n\r\n    var winH = $(window).height();\r\n    var ff = parseFloat(document.documentElement.style.fontSize);\r\n    var dw = 100 / ff;\r\n    if (winH < (1030 / dw)) {\r\n        var s = winH / (1030 / dw);\r\n        $(\".main\").css({\r\n            \"transform\": \"scale(\" + s + \")\",\r\n            \"-webkit-transform\": \"scale(\" + s + \")\"\r\n        });\r\n    } else {\r\n        $(\".main\").css({\r\n            \"transform\": \"scale(1)\",\r\n            \"-webkit-transform\": \"scale(1)\"\r\n        });\r\n    }\r\n    $(\"body\").height(winH);\r\n    $('.play').click(function () {\r\n        video.play();\r\n        $('.video .play').hide();\r\n        $('#video').attr('controls', true);\r\n    });\r\n    $(\".prop .btn\").click(function () {\r\n        $(this).parents(\".prop\").fadeOut();\r\n    });\r\n});\r\nvar shareparams = {\r\n    'title': '谁是OPPO拍照KING？',\r\n    'link': projectName + '/resource/gulp-demo/dist/index.html',\r\n    'imgUrl': 'http://opponplusgroup.oss-cn-hangzhou.aliyuncs.com/upvote/img/share2.jpg',\r\n    'desc': '前置2000万还是后置2000万？'\r\n};\r\nWxShare.initConfig(shareparams);"]}